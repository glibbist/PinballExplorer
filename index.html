<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jurassic Park Pinball Complete Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #2c3e50, #34495e, #1a252f);
            color: #ecf0f1;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #e74c3c;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-size: 2.8em;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 10px #e74c3c; }
            to { text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 20px #e74c3c, 0 0 30px #e74c3c; }
        }

        .header-info {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #e74c3c;
            text-align: center;
        }

        .tabs {
            display: flex;
            background: rgba(0,0,0,0.4);
            border-radius: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 5px;
        }

        .tab-button {
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: #bdc3c7;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .tab-button.active {
            background: #e74c3c;
            color: white;
        }

        .tab-button:hover:not(.active) {
            background: rgba(231, 76, 60, 0.2);
            color: #ecf0f1;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .game-state {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e74c3c;
        }

        .mode-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .mode-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .mode-button:hover::before {
            left: 100%;
        }

        .mode-button.available {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .mode-button.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
        }

        .mode-button.locked {
            background: linear-gradient(135deg, #7f8c8d, #95a5a6);
            color: #bdc3c7;
            cursor: not-allowed;
        }

        .mode-button.completed {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: #2ecc71;
            border: 2px solid #2ecc71;
        }

        .mode-icon {
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .mode-name {
            font-size: 0.9em;
            text-align: center;
        }

        .mode-info {
            display: none;
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #e74c3c;
        }

        .mode-info.active {
            display: block;
        }

        .mode-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(231, 76, 60, 0.3);
        }

        .mode-title {
            display: flex;
            align-items: center;
            font-size: 1.8em;
            color: #e74c3c;
            margin-right: auto;
        }

        .mode-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .status-active { background: rgba(243, 156, 18, 0.2); color: #f39c12; }
        .status-completed { background: rgba(39, 174, 96, 0.2); color: #27ae60; }
        .status-qualifying { background: rgba(52, 152, 219, 0.2); color: #3498db; }

        .gimmick-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .gimmick-card {
            background: rgba(52, 73, 94, 0.6);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #34495e;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        .gimmick-card:hover {
            background: rgba(52, 73, 94, 0.8);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .gimmick-card.completed {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border-color: #229954;
        }

        .gimmick-card.active {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border-color: #d35400;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(243, 156, 18, 0); }
            100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
        }

        .gimmick-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .gimmick-name {
            font-weight: bold;
            font-size: 1.1em;
            color: #e74c3c;
        }

        .gimmick-progress {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: #34495e;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .gimmick-value {
            font-size: 0.9em;
            color: #bdc3c7;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }

        .gimmick-details {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 5px;
            font-size: 0.85em;
            line-height: 1.4;
        }

        .requirements-list {
            margin-top: 5px;
        }

        .requirement {
            display: flex;
            align-items: center;
            margin: 3px 0;
            color: #95a5a6;
        }

        .requirement.completed {
            color: #2ecc71;
        }

        .requirement-icon {
            margin-right: 8px;
            font-size: 0.8em;
            width: 16px;
            text-align: center;
        }

        .controls {
            text-align: center;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }

        .control-btn:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .progress-summary {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #34495e;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: rgba(52, 73, 94, 0.5);
            border-radius: 5px;
        }

        .stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            display: block;
        }

        .stat-label {
            font-size: 0.8em;
            color: #95a5a6;
            margin-top: 2px;
        }

        .multiball-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
            display: none;
            animation: multiballFlash 1s infinite alternate;
        }

        @keyframes multiballFlash {
            from { opacity: 0.8; transform: scale(1); }
            to { opacity: 1; transform: scale(1.05); }
        }

        .section-header {
            display: flex;
            align-items: center;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(231, 76, 60, 0.3);
        }

        .section-title {
            font-size: 1.5em;
            color: #e74c3c;
            margin-right: 20px;
        }

        .section-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        @media (max-width: 768px) {
            .mode-selector {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .gimmick-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🦕 Jurassic Park Pinball Complete Explorer</h1>
        
        <div class="header-info">
            <h2>Complete Game Structure Explorer (Premium Edition)</h2>
            <p>Track all paddock modes, multiballs, control room tasks, and features with interactive progress tracking. Updated based on actual gameplay mechanics: Collect 6 dinosaurs via paddocks, progress to Visitor's Center, unlock multiballs and wizard modes.</p>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('modes')">🦖 Paddock Modes (Dinosaurs)</button>
            <button class="tab-button" onclick="switchTab('multiballs')">⚡ Multiballs</button>
            <button class="tab-button" onclick="switchTab('gimmicks')">🎯 Gimmicks & Features</button>
            <button class="tab-button" onclick="switchTab('awards')">🏆 Awards & Collectibles</button>
        </div>

        <div id="modes" class="tab-content active">
            <div class="progress-summary">
                <h3>Overall Game Progress</h3>
                <div class="progress-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="totalProgress">0%</span>
                        <span class="stat-label">Completion</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="activeMultiballs">0</span>
                        <span class="stat-label">Active Multiballs</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="completedModes">0/6</span>
                        <span class="stat-label">Dinosaurs Captured</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalScore">0</span>
                        <span class="stat-label">Estimated Score</span>
                    </div>
                </div>
            </div>

            <div class="game-state">
                <div class="section-header">
                    <span class="section-icon">🎮</span>
                    <h2 class="section-title">Paddock Dinosaur Modes</h2>
                </div>
                <div class="mode-selector" id="modeSelector"></div>
            </div>

            <div id="modeInfo"></div>
        </div>

        <div id="multiballs" class="tab-content">
            <div class="game-state">
                <div class="section-header">
                    <span class="section-icon">⚡</span>
                    <h2 class="section-title">Multiball Modes</h2>
                </div>
                <div class="gimmick-grid" id="multiballGrid"></div>
            </div>
        </div>

        <div id="gimmicks" class="tab-content">
            <div class="game-state">
                <div class="section-header">
                    <span class="section-icon">🎯</span>
                    <h2 class="section-title">Gimmicks & Features</h2>
                </div>
                <div class="gimmick-grid" id="gimmickGrid"></div>
            </div>
        </div>

        <div id="awards" class="tab-content">
            <div class="game-state">
                <div class="section-header">
                    <span class="section-icon">🏆</span>
                    <h2 class="section-title">Awards & Collectibles</h2>
                </div>
                <div class="gimmick-grid" id="awardsGrid"></div>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn" onclick="resetGame()">🔄 Reset Game</button>
            <button class="control-btn" onclick="completeCurrentSection()">✅ Complete Current</button>
            <button class="control-btn" onclick="startRandomMultiball()">⚡ Random Multiball</button>
        </div>
    </div>

    <div class="multiball-indicator" id="multiballIndicator">
        ⚡ MULTIBALL ACTIVE! ⚡
    </div>

    <script>
        // Updated Jurassic Park Pinball (Premium) game data based on transcript
        const gameData = {
            majorModes: [  // Paddock Dinosaur Capture Modes (6 total to reach Visitor's Center)
                {
                    id: 'trex',
                    name: 'T-Rex Paddock',
                    icon: '🦖',
                    type: 'paddock',
                    requirements: [
                        'Spell T-R-E-X via white shots and left ramp',
                        'Set traps with yellow targets (rescue staff first)',
                        'Hit lit green shots to track, tranquilize with T-Rex shot',
                        'Shoot both yellow trap targets to capture (EB + multiplier on success)'
                    ],
                    shots: [
                        { name: 'White Shots (Rescues)', value: 'Build staff + 10M+ streak', maxShots: 5, points: [5000000, 10000000, 15000000, 20000000, 25000000], type: 'target' },
                        { name: 'Yellow Trap Targets', value: '15M → 75M', maxShots: 2, points: [15000000, 75000000], type: 'target' },
                        { name: 'T-Rex Tranquilize', value: '20M pause', maxShots: 3, points: [20000000], type: 'ramp' },
                        { name: 'Helipad Feed', value: '8M per hit', maxShots: 4, points: [8000000], type: 'playfield' }
                    ],
                    multiball: { balls: 2, jackpot: '30M', superJackpot: '60M' }  // Mini multiball during feed
                },
                {
                    id: 'spitter',
                    name: 'Spitter Paddock',
                    icon: '🦎',
                    type: 'paddock',
                    requirements: [
                        'Shoot white shots to light left ramp spinner',
                        'Rescue staff to set traps (yellow targets)',
                        'Track with green shots, capture via right ramp',
                        'Switch truck direction for side preference'
                    ],
                    shots: [
                        { name: 'Left Ramp Spinner', value: '10M → 50M', maxShots: 3, points: [10000000, 30000000, 50000000], type: 'ramp' },
                        { name: 'Rescue Targets', value: '12M each', maxShots: 6, points: [12000000], type: 'target' },
                        { name: 'Right Ramp Capture', value: '25M', maxShots: 2, points: [25000000], type: 'ramp' },
                        { name: 'Truck Switch', value: '5M shift', maxShots: 3, points: [5000000], type: 'target' }
                    ]
                },
                {
                    id: 'triceratops',
                    name: 'Triceratops Paddock',
                    icon: '🦕',
                    type: 'paddock',
                    requirements: [
                        'Activate via truck choice and white shots',
                        'Build rescues for traps, hit both yellow targets',
                        'Tranquilize to pause dino movement',
                        'Capture for Jurassic Perk (e.g., 2x bonus)'
                    ],
                    shots: [
                        { name: 'White Shots', value: '8M → 40M', maxShots: 4, points: [8000000, 20000000, 30000000, 40000000], type: 'target' },
                        { name: 'Yellow Traps', value: '15M each', maxShots: 2, points: [15000000], type: 'target' },
                        { name: 'Dino Track Shots', value: '18M', maxShots: 5, points: [18000000], type: 'combo' },
                        { name: 'Bumpers (Advance)', value: '6M per hit', maxShots: 10, points: [6000000], type: 'bumper' }
                    ]
                },
                {
                    id: 'pteranodon',
                    name: 'Pteranodon Attack',
                    icon: '🦅',
                    type: 'paddock',
                    requirements: [
                        'Hit switches/bumpers to build multiplier (up to 15x)',
                        'Shoot right ramp to collect value',
                        'Rescues continue post-capture for double value',
                        'Awards: 2x jackpots in Chaos MB'
                    ],
                    shots: [
                        { name: 'Switches/Bumpers', value: 'Build 15x', maxShots: 10, points: [5000000], type: 'switch' },
                        { name: 'Right Ramp Collect', value: '20M → 100M (multiplied)', maxShots: 3, points: [20000000, 60000000, 100000000], type: 'ramp' },
                        { name: 'Rescue Loop', value: '12M streak', maxShots: 4, points: [12000000], type: 'loop' },
                        { name: 'Helipad', value: '10M', maxShots: 2, points: [10000000], type: 'playfield' }
                    ]
                },
                {
                    id: 'raptor',
                    name: 'Raptor Pit',
                    icon: '🦖',
                    type: 'paddock',
                    requirements: [
                        'Shoot left orbit to cage, damage fence with targets',
                        'Release raptors, spell C-H-A-O-S for Tri-Ball',
                        'Jackpots on ramps, then chaos letters (values increase)',
                        'Clear paddock for EB chance'
                    ],
                    shots: [
                        { name: 'Raptor Cage', value: '15M → 75M', maxShots: 3, points: [15000000, 45000000, 75000000], type: 'orbit' },
                        { name: 'Fence Targets', value: '10M each', maxShots: 6, points: [10000000], type: 'target' },
                        { name: 'Chaos Letters', value: '20M+ per letter', maxShots: 5, points: [20000000], type: 'letter' },
                        { name: 'Raptor Pit', value: '25M', maxShots: 2, points: [25000000], type: 'pit' }
                    ],
                    multiball: { balls: 3, jackpot: '25M', superJackpot: '50M+' }
                },
                {
                    id: 'spinosaurus',
                    name: 'Spinosaurus Paddock',
                    icon: '🦕',
                    type: 'paddock',
                    requirements: [
                        'Truck to side wall path for easier access',
                        'White shots to activate, traps via rescues',
                        'Capture both yellows, unlock King of the Island MB',
                        'Perk: +8s on timers'
                    ],
                    shots: [
                        { name: 'Side Wall Shots', value: '16M → 80M', maxShots: 4, points: [16000000, 40000000, 60000000, 80000000], type: 'ramp' },
                        { name: 'Yellow Traps', value: '18M each', maxShots: 2, points: [18000000], type: 'target' },
                        { name: 'Dino Track', value: '22M', maxShots: 3, points: [22000000], type: 'combo' },
                        { name: 'Supply Targets', value: '9M', maxShots: 5, points: [9000000], type: 'target' }
                    ]
                },
                {
                    id: 'visitors',
                    name: "Visitor's Center (Wizard Unlock)",
                    icon: '🏛️',
                    type: 'wizard',
                    requirements: [
                        'Spell M-A-P via white shots (helipad, left ramp, etc.) after 6 dinosaurs',
                        'Multiball: Make lit shots (move rightward, side ramps)',
                        'Max rescues/streaks for bonus (x times captures)',
                        'Unlocks Museum Mayhem / Escape Nublar'
                    ],
                    shots: [
                        { name: 'Lit Shots (Moving)', value: '30M+ per level', maxShots: 6, points: [30000000], type: 'moving' },
                        { name: 'Raptor Pit (Left)', value: '40M', maxShots: 3, points: [40000000], type: 'pit' },
                        { name: 'Side Ramp Setup', value: '50M jackpot', maxShots: 4, points: [50000000], type: 'ramp' },
                        { name: 'Rescue Streaks', value: '25M x streak', maxShots: 10, points: [25000000], type: 'streak' }
                    ],
                    multiball: { balls: 2, jackpot: '50M', superJackpot: '100M', duration: 'Until shots complete' }
                }
            ],

            multiballs: [  // Key multiballs from transcript
                {
                    id: 'chaos',
                    name: 'Chaos Multiball',
                    icon: '🔥',
                    requirements: ['Spell C-H-A-O-S (targets across PF, 2x for advanced)', 'Truck direction sets left/right jackpots'],
                    details: 'Jackpots build value (shoot red), then Super (after 1-3 jackpots). Continue jackpots post-super. 2x/3x phases. Finish letters for extra jackpot + EB chance.',
                    value: 'Jackpots 10M+ → Super 20M+ → Grand 50M+',
                    maxProgress: 2,  // Basic + Advanced
                    type: 'multiball'
                },
                {
                    id: 'trex',
                    name: 'T-Rex Multiball',
                    icon: '🦖',
                    requirements: ['Spell T-R-E-X, feed left ramp (T-Rex eats ball)', 'Capture via traps/smart missile for EB'],
                    details: 'Mini 2-ball. Jackpots on lit shots, supers build. Perks: 2x bonus, super spinner. Dodge attacks with orange shots.',
                    value: '30M Jackpots, 60M Supers, EB on capture',
                    maxProgress: 1,
                    type: 'multiball'
                },
                {
                    id: 'raptor',
                    name: 'Raptor Tri-Ball',
                    icon: '🦅',
                    requirements: ['Damage fence in Raptor Pit, release raptors', 'Jackpots on left/right ramps, then chaos letters'],
                    details: '3-ball. Letters worth jackpot value (O highest). Finish for extra balls in play (like original JP). Continue rescues.',
                    value: '25M Jackpots, 50M+ letter values',
                    maxProgress: 1,
                    type: 'multiball'
                },
                {
                    id: 'visitors',
                    name "Visitor's Center Multiball",
                    icon: '🏛️',
                    requirements: ['Spell MAP after 6 dinosaurs', 'Make moving lit shots (progress right, side ramps difficult)'],
                    details: '2-ball. Shots advance levels but timeout left if missed. Bonus: Rescues x captures. Unlocks wizard modes (Museum Mayhem, etc.).',
                    value: '30M+ per shot, escalating to 100M+',
                    maxProgress: 1,
                    type: 'multiball'
                },
                {
                    id: 'king',
                    name: 'King of the Island (Wizard)',
                    icon: '👑',
                    requirements: ['Capture Spinosaurus + all prior', 'Complete Visitor\'s Center'],
                    details: 'High-scoring MB with all features. Leads to final wizards: When Dinosaurs Rule the Earth.',
                    value: '100M+ Jackpots, 250M Supers',
                    maxProgress: 1,
                    type: 'multiball'
                }
            ],

            gimmicks: [  // Features like skill shots, control room, supply drops
                {
                    id: 'skillshot',
                    name: 'Skill Shots',
                    icon: '🎯',
                    requirements: ['Plunge to lit lane at ball start', 'Short plunge for quick shots'],
                    details: `Main: Left Ramp → Right Ramp → Side Ramp combo (15M+).
Other: Amber target, right loop, helipad feed.
Super: Quick plunger (10M + light ramps/Mystery).`,
                    value: '2M-15M+ combos + lane lights',
                    maxProgress: 4,  // Basic, combo, super, advanced
                    type: 'skillshot'
                },
                {
                    id: 'supply',
                    name: 'Supply Drops',
                    icon: '📦',
                    requirements: ['Hit 3 blue targets around PF (some overlap traps)', 'Lights 2x scoring on right'],
                    details: `Random awards: Chaos letter, 2x scoring, Jurassic Perk.
Targets: Raptor gate, trap sets. Builds amber value for big awards.`,
                    value: '10M-35M + 2x scoring lit',
                    maxProgress: 3,
                    type: 'gimmick'
                },
                {
                    id: 'perks',
                    name: 'Jurassic Perks',
                    icon: '⭐',
                    requirements: ['Earn from dinosaur captures', 'Track on left side'],
                    details: `Examples: 2x/3x bonus (from hard dinos), super spinner (+2x), +200k combos, +8s timers (T-Rex), 15k/bumper.
Only bonus multipliers in game. Builds wizard value via rescues.`,
                    value: 'Multipliers + scoring boosts',
                    maxProgress: 6,
                    type: 'perk'
                },
                {
                    id: 'controlroom',
                    name: 'Control Room Tasks',
                    icon: '💻',
                    requirements: ['Shoot control room saucer (lit after modes/awards)', 'Choose: System Boot, Restore Power, Virus Attack, Secure Control Room'],
                    details: `System Boot: Blue arrow + combo (huge points).
Restore Power: Spinner builds value, collect blue arrows.
Virus Attack: Frenzy every shot.
Secure Control Room: Blue shots collect, remake green to extend (+5s, build value).`,
                    value: '20M-100M+ per task, +fossils',
                    maxProgress: 4,  // 4 tasks
                    type: 'mode'
                },
                {
                    id: 'rescues',
                    name: 'Staff Rescues & Traps',
                    icon: '👥',
                    requirements: ['Shoot lit rescue targets (white shots)', 'Build streak without captures/dino hits'],
                    details: `Lights yellow trap targets. Hit traps to set, then capture yellow dino.
Post-capture: Continue rescues for double paddock value. Streak pads Visitor\'s Center bonus.`,
                    value: 'Increasing 5M-25M per rescue + streaks',
                    maxProgress: 10,  // Max streak
                    type: 'streak'
                },
                {
                    id: 'amber',
                    name: 'Amber Collection',
                    icon: '💎',
                    requirements: ['Shoot amber target repeatedly', 'Grows throughout game'],
                    details: `High value leads to awards: EB, 2x scoring, light extras.
Collect via mystery/smart missile. Ties to fossils/wizards.`,
                    value: '25M+ points + random awards',
                    maxProgress: 3,
                    type: 'collectible'
                }
            ],

            awards: [  // Extra balls, fossils, wizard unlocks
                {
                    id: 'extraball',
                    name: 'Extra Balls',
                    icon: '⚪',
                    requirements: ['Via T-Rex capture, Raptor finish, Supply/Mystery, high rescues', 'Spell Chaos letters'],
                    details: `Sources: T-Rex trap (smart missile), Raptor Tri-Ball complete, large tower shots, Control Room secures, high amber.
Also: 50% mystery chance, wizard completions.`,
                    value: 'Additional ball + ball save',
                    maxProgress: 4,
                    type: 'award'
                },
                {
                    id: 'fossils',
                    name: 'Dinosaur Fossils',
                    icon: '🦴',
                    requirements: ['Earn from Control Room tasks/Paddock captures', '3 fossils unlock wizards'],
                    details: `Right 3 fossils for wizard modes: Museum Mayhem (T-Rex modes), Escape Nublar (all 3), When Dinosaurs Rule the Earth (win all).
Left: Perks/progress.`,
                    value: '20M each + wizard lights',
                    maxProgress: 6,
                    type: 'collectible'
                },
                {
                    id: 'wizards',
                    name: 'Wizard Modes',
                    icon: '⚡',
                    requirements: ['Complete 6 dinosaurs → Visitor\'s Center MB', 'All fossils + captures for finals'],
                    details: `Museum Mayhem: All T-Rex modes.
Escape Nublar: All 3 centers.
When Dinosaurs Rule the Earth: Win all (super high scores, MBs).`,
                    value: '100M-1B+ + game completion',
                    maxProgress: 3,
                    type: 'wizard'
                }
            ]
        };

        let gameState = {
            completedModes: [],
            currentMode: null,
            currentTab: 'modes',
            shotProgress: {},
            gimmickProgress: {},
            multiballActive: false,
            totalScore: 0,
            activeMultiballs: 0
        };

        // Initialize game
        function initGame() {
            // Reset all progress
            gameState = {
                completedModes: [],
                currentMode: null,
                currentTab: 'modes',
                shotProgress: {},
                gimmickProgress: {},
                multiballActive: false,
                totalScore: 0,
                activeMultiballs: 0
            };
            
            // Initialize shot progress
            gameData.majorModes.forEach(mode => {
                mode.shots.forEach(shot => {
                    gameState.shotProgress[`${mode.id}_${shot.name}`] = 0;
                });
            });
            
            // Initialize gimmick progress
            [...gameData.multiballs, ...gameData.gimmicks, ...gameData.awards].forEach(item => {
                gameState.gimmickProgress[item.id] = 0;
            });
            
            updateModeSelector();
            updateMultiballGrid();
            updateGimmickGrid();
            updateAwardsGrid();
            updateGameStats();
        }

        // Tab switching
        function switchTab(tab) {
            gameState.currentTab = tab;
            
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tab).classList.add('active');
            
            // Update grids for current tab
            if (tab === 'multiballs') updateMultiballGrid();
            if (tab === 'gimmicks') updateGimmickGrid();
            if (tab === 'awards') updateAwardsGrid();
        }

        // Update mode selector (now for 6 paddocks + wizard)
        function updateModeSelector() {
            const selector = document.getElementById('modeSelector');
            selector.innerHTML = '';

            gameData.majorModes.slice(0, 6).forEach((mode, index) => {  // Show only 6 base paddocks
                const button = document.createElement('button');
                button.className = 'mode-button';
                
                const isCompleted = gameState.completedModes.includes(mode.id);
                const isWizard = mode.id === 'visitors';
                const modeCount = gameState.completedModes.length;
                
                button.innerHTML = `
                    <div class="mode-icon">${mode.icon}</div>
                    <div class="mode-name">${mode.name}</div>
                `;
                
                if (isWizard && modeCount < 6) {
                    button.classList.add('locked');
                    button.disabled = true;
                    button.title = `Capture ${6 - modeCount} more dinosaurs`;
                } else if (isCompleted) {
                    button.classList.add('completed');
                    button.onclick = () => viewMode(mode);
                } else if (gameState.currentMode === mode.id) {
                    button.classList.add('active');
                    button.onclick = () => endMode(mode);
                } else {
                    button.classList.add('available');
                    button.onclick = () => startMode(mode);
                }
                
                selector.appendChild(button);
            });

            // Add Visitor's Center button if 6 completed
            if (gameState.completedModes.length >= 6) {
                const wizardBtn = document.createElement('button');
                wizardBtn.className = 'mode-button available';
                const wizardMode = gameData.majorModes.find(m => m.id === 'visitors');
                wizardBtn.innerHTML = `
                    <div class="mode-icon">${wizardMode.icon}</div>
                    <div class="mode-name">${wizardMode.name}</div>
                `;
                wizardBtn.onclick = () => startMode(wizardMode);
                selector.appendChild(wizardBtn);
            }
        }

        // Mode control functions
        function startMode(mode) {
            gameState.currentMode = mode.id;
            if (mode.type === 'paddock' || mode.type === 'wizard') {
                if (mode.multiball) {
                    gameState.activeMultiballs++;
                    gameState.multiballActive = true;
                    showMultiballIndicator();
                }
            }
            document.getElementById('modeInfo').innerHTML = createModeDisplay(mode);
            updateModeSelector();
            updateGameStats();
            updateInteractiveShots(mode);
        }

        function endMode(mode) {
            if (mode.multiball) {
                gameState.activeMultiballs = Math.max(0, gameState.activeMultiballs - 1);
                if (gameState.activeMultiballs === 0) {
                    gameState.multiballActive = false;
                    hideMultiballIndicator();
                }
            }
            gameState.currentMode = null;
            document.getElementById('modeInfo').innerHTML = '';
            updateModeSelector();
            updateGameStats();
        }

        function viewMode(mode) {
            gameState.currentMode = mode.id;
            document.getElementById('modeInfo').innerHTML = createModeDisplay(mode);
            updateModeSelector();
        }

        // Create mode display (updated for paddock mechanics)
        function createModeDisplay(mode) {
            const isActive = gameState.currentMode === mode.id;
            const isCompleted = gameState.completedModes.includes(mode.id);
            const modeCount = gameState.completedModes.length;
            
            let html = `
                <div class="mode-info active">
                    <div class="mode-header">
                        <div class="mode-title">
                            <span class="dino-icon">${mode.icon}</span>
                            <span>${mode.name}</span>
                        </div>
                        <div class="mode-status ${isActive ? 'status-active' : isCompleted ? 'status-completed' : 'status-qualifying'}">
                            ${isActive ? 'ACTIVE' : isCompleted ? 'COMPLETED' : 'QUALIFYING'}
                        </div>
                    </div>
                    
                    <div class="requirements">
                        <h3>🎯 Mode Requirements:</h3>
                        <div class="requirements-list">`;

            mode.requirements.forEach(req => {
                const check = isCompleted ? '✅' : (isActive && modeCount >= gameData.majorModes.slice(0,6).findIndex(m => m.id === mode.id)) ? '🔥' : '🔒';
                html += `<div class="requirement"><span class="requirement-icon">${check}</span>${req}</div>`;
            });

            if (mode.multiball) {
                html += `<div class="requirement"><span class="requirement-icon">⚡</span>Multiball: ${mode.multiball.balls} balls, ${formatPoints(mode.multiball.jackpot)} Jackpot</div>`;
            }

            html += `</div></div><div class="gimmick-grid">`;

            mode.shots.forEach((shot, index) => {
                const progressKey = `${mode.id}_${shot.name.replace(/\s+/g, '_')}`;
                const currentProgress = gameState.shotProgress[progressKey] || 0;
                const isShotCompleted = currentProgress >= shot.maxShots;
                const progressPercent = (currentProgress / shot.maxShots) * 100;
                const nextPoints = shot.points[Math.min(currentProgress, shot.points.length - 1)] || shot.points[shot.points.length - 1];
                
                html += `
                    <div class="gimmick-card ${isShotCompleted ? 'completed' : (isActive && currentProgress > 0) ? 'active' : ''}" onclick="completeShot('${mode.id}', '${shot.name.replace(/\s+/g, '_')}')">
                        <div class="gimmick-header">
                            <span class="gimmick-name">${shot.name} ${shot.type === 'target' ? '🎯' : shot.type === 'ramp' ? '📈' : shot.type === 'loop' ? '🔄' : shot.type === 'bumper' ? '💥' : shot.type === 'orbit' ? '🌀' : shot.type === 'drop' ? '⬇️' : shot.type === 'standup' ? '📏' : shot.type === 'saucer' ? '🚀' : shot.type === 'pit' ? '🕳️' : shot.type === 'letter' ? '🔤' : shot.type === 'switch' ? '🔄' : shot.type === 'moving' ? '➡️' : shot.type === 'streak' ? '🔥' : shot.type === 'combo' ? '🔗' : shot.type === 'playfield' ? '🎪' : '⚡'}</span>
                            <span>${currentProgress}/${shot.maxShots} ${isShotCompleted ? '✅' : ''}</span>
                        </div>
                        <div class="gimmick-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progressPercent}%"></div>
                            </div>
                            <span>${progressPercent.toFixed(0)}%</span>
                        </div>
                        <div class="gimmick-value">Next: ${formatPoints(nextPoints)}</div>
                        <div class="gimmick-details">
                            <strong>Type:</strong> ${shot.type.toUpperCase()}<br>
                            <strong>Requirement:</strong> ${shot.maxShots} shots<br>
                            ${isShotCompleted ? `<strong>Completed!</strong> ${shot.value}` : `<strong>Active:</strong> ${currentProgress > 0 ? 'In Progress (Build Streak!)' : 'Start Rescues/White Shots!'}`}
                        </div>
                    </div>`;
            });

            html += `</div></div>`;
            return html;
        }

        // Update multiball grid
        function updateMultiballGrid() {
            const grid = document.getElementById('multiballGrid');
            grid.innerHTML = '';

            gameData.multiballs.forEach(multiball => {
                const progress = gameState.gimmickProgress[multiball.id] || 0;
                const isCompleted = progress >= multiball.maxProgress;
                const isActive = gameState.activeMultiballs > 0 && gameState.multiballActive;
                
                const card = document.createElement('div');
                card.className = `gimmick-card ${isCompleted ? 'completed' : (isActive || progress > 0) ? 'active' : ''}`;
                card.innerHTML = `
                    <div class="gimmick-header">
                        <span class="gimmick-name">${multiball.icon} ${multiball.name}</span>
                        <span>${progress}/${multiball.maxProgress} ${isCompleted ? '✅' : ''}</span>
                    </div>
                    <div class="gimmick-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(progress / multiball.maxProgress) * 100}%"></div>
                        </div>
                        <span>${((progress / multiball.maxProgress) * 100).toFixed(0)}%</span>
                    </div>
                    <div class="gimmick-value">${multiball.value}</div>
                    <div class="gimmick-details">
                        <strong>Requirements:</strong><br>
                        ${multiball.requirements.map(req => `<div class="requirement ${progress > 0 ? 'completed' : ''}"><span class="requirement-icon">${progress > 0 ? '✅' : '🔒'}</span>${req}</div>`).join('')}
                        <br><strong>Details:</strong> ${multiball.details}
                    </div>
                `;
                card.onclick = () => activateMultiball(multiball);
                grid.appendChild(card);
            });
        }

        // Update gimmick grid
        function updateGimmickGrid() {
            const grid = document.getElementById('gimmickGrid');
            grid.innerHTML = '';

            gameData.gimmicks.forEach(gimmick => {
                const progress = gameState.gimmickProgress[gimmick.id] || 0;
                const isCompleted = progress >= gimmick.maxProgress;
                
                const card = document.createElement('div');
                card.className = `gimmick-card ${isCompleted ? 'completed' : progress > 0 ? 'active' : ''}`;
                card.innerHTML = `
                    <div class="gimmick-header">
                        <span class="gimmick-name">${gimmick.icon} ${gimmick.name}</span>
                        <span>${progress}/${gimmick.maxProgress} ${isCompleted ? '✅' : ''}</span>
                    </div>
                    <div class="gimmick-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(progress / gimmick.maxProgress) * 100}%"></div>
                        </div>
                        <span>${((progress / gimmick.maxProgress) * 100).toFixed(0)}%</span>
                    </div>
                    <div class="gimmick-value">${gimmick.value}</div>
                    <div class="gimmick-details">${gimmick.details.replace(/\n/g, '<br>')}</div>
                `;
                card.onclick = () => progressGimmick(gimmick);
                grid.appendChild(card);
            });
        }

        // Update awards grid
        function updateAwardsGrid() {
            const grid = document.getElementById('awardsGrid');
            grid.innerHTML = '';

            gameData.awards.forEach(award => {
                const progress = gameState.gimmickProgress[award.id] || 0;
                const isCompleted = progress >= award.maxProgress;
                
                const card = document.createElement('div');
                card.className = `gimmick-card ${isCompleted ? 'completed' : progress > 0 ? 'active' : ''}`;
                card.innerHTML = `
                    <div class="gimmick-header">
                        <span class="gimmick-name">${award.icon} ${award.name}</span>
                        <span>${progress}/${award.maxProgress} ${isCompleted ? '✅' : ''}</span>
                    </div>
                    <div class="gimmick-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(progress / award.maxProgress) * 100}%"></div>
                        </div>
                        <span>${((progress / award.maxProgress) * 100).toFixed(0)}%</span>
                    </div>
                    <div class="gimmick-value">${award.value}</div>
                    <div class="gimmick-details">${award.details.replace(/\n/g, '<br>')}</div>
                `;
                card.onclick = () => collectAward(award);
                grid.appendChild(card);
            });
        }

        // Shot completion (updated for streaks/perks)
        function completeShot(modeId, shotName) {
            if (gameState.currentMode !== modeId) return;
            
            const mode = gameData.majorModes.find(m => m.id === modeId);
            const shot = mode.shots.find(s => s.name === shotName.replace(/_/g, ' '));
            const progressKey = `${modeId}_${shotName}`;
            
            const currentProgress = gameState.shotProgress[progressKey] || 0;
            if (currentProgress < shot.maxShots) {
                const nextProgress = currentProgress + 1;
                gameState.shotProgress[progressKey] = nextProgress;
                
                // Add points (streak bonus simulation)
                let points = shot.points[Math.min(currentProgress, shot.points.length - 1)] || shot.points[0];
                if (shot.type === 'streak' || shot.type === 'combo') points *= (1 + nextProgress * 0.5);  // Streak multiplier
                gameState.totalScore += points;
                
                // Update display
                document.getElementById('modeInfo').innerHTML = createModeDisplay(mode);
                updateInteractiveShots(mode);
                
                // Check mode completion
                const allShotsComplete = mode.shots.every(s => {
                    const key = `${modeId}_${s.name.replace(/\s+/g, '_')}`;
                    return (gameState.shotProgress[key] || 0) >= s.maxShots;
                });
                
                if (allShotsComplete && !gameState.completedModes.includes(mode.id)) {
                    completeMode(mode);
                }
                
                updateGameStats();
            }
        }

        // Make shots interactive
        function updateInteractiveShots(mode) {
            setTimeout(() => {
                const shotCards = document.querySelectorAll('#modeInfo .gimmick-card');
                shotCards.forEach(card => {
                    card.style.cursor = gameState.currentMode === mode.id ? 'pointer' : 'default';
                    card.title = gameState.currentMode === mode.id ? 'Click to complete shot (build rescues!)' : '';
                });
            }, 100);
        }

        // Complete mode (updated for 6 dinosaurs → wizard)
        function completeMode(mode) {
            if (!gameState.completedModes.includes(mode.id)) {
                gameState.completedModes.push(mode.id);
                
                // Award completion bonus + perk
                gameState.totalScore += 50000000; // 50M + Jurassic Perk simulation
                if (mode.id === 'visitors' && gameState.completedModes.length === 7) {
                    alert('🎉 CONGRATULATIONS! Visitor\'s Center & Wizards Complete! 🏛️🦖');
                } else if (gameState.completedModes.length === 6 && !gameState.completedModes.includes('visitors')) {
                    const wizardMode = gameData.majorModes.find(m => m.id === 'visitors');
                    setTimeout(() => {
                        if (confirm(`🎉 All 6 dinosaurs captured! Enter ${wizardMode.name}? Spell MAP!`)) {
                            startMode(wizardMode);
                        }
                    }, 1000);
                }
                
                updateModeSelector();
                updateGameStats();
            }
        }

        // Gimmick functions (updated for control room/tasks)
        function progressGimmick(gimmick) {
            const current = gameState.gimmickProgress[gimmick.id] || 0;
            if (current < gimmick.maxProgress) {
                gameState.gimmickProgress[gimmick.id] = current + 1;
                let bonus = 25000000;
                if (gimmick.id === 'controlroom') bonus += 50000000;  // Higher for tasks
                gameState.totalScore += bonus;
                updateGimmickGrid();
                updateGameStats();
            }
        }

        function activateMultiball(multiball) {
            if (gameState.gimmickProgress[multiball.id] < multiball.maxProgress) {
                gameState.gimmickProgress[multiball.id]++;
                gameState.activeMultiballs++;
                gameState.multiballActive = true;
                let bonus = 75000000;
                if (multiball.id === 'chaos') bonus *= 2;  // Higher for chaos
                gameState.totalScore += bonus;
                showMultiballIndicator();
                updateMultiballGrid();
                updateGameStats();
                setTimeout(() => {
                    if (--gameState.activeMultiballs === 0) {
                        gameState.multiballActive = false;
                        hideMultiballIndicator();
                    }
                    updateGameStats();
                }, 45000); // ~45s for MB duration
            }
        }

        function collectAward(award) {
            const current = gameState.gimmickProgress[award.id] || 0;
            if (current < award.maxProgress) {
                gameState.gimmickProgress[award.id] = current + 1;
                let bonus = 10000000;
                if (award.id === 'extraball') bonus += 50000000;  // EB value
                gameState.totalScore += bonus;
                updateAwardsGrid();
                updateGameStats();
            }
        }

        // Control functions (updated for new structure)
        function resetGame() {
            if (confirm('Reset ALL progress? This cannot be undone.')) {
                initGame();
                document.getElementById('modeInfo').innerHTML = '';
                hideMultiballIndicator();
            }
        }

        function completeCurrentSection() {
            const currentTab = gameState.currentTab;
            if (currentTab === 'modes' && gameState.currentMode) {
                const mode = gameData.majorModes.find(m => m.id === gameState.currentMode);
                if (mode && confirm(`Complete all shots in ${mode.name}? (Capture Dino!)`)) {
                    mode.shots.forEach(shot => {
                        const key = `${mode.id}_${shot.name.replace(/\s+/g, '_')}`;
                        gameState.shotProgress[key] = shot.maxShots;
                        for (let i = 0; i < shot.maxShots; i++) {
                            let points = shot.points[Math.min(i, shot.points.length - 1)] || shot.points[0];
                            if (shot.type === 'streak') points *= (1 + i * 0.5);
                            gameState.totalScore += points;
                        }
                    });
                    completeMode(mode);
                    document.getElementById('modeInfo').innerHTML = createModeDisplay(mode);
                    updateGameStats();
                }
            } else if (confirm(`Complete all ${currentTab === 'multiballs' ? 'multiballs' : currentTab === 'gimmicks' ? 'gimmicks' : 'awards'}?`)) {
                const items = currentTab === 'multiballs' ? gameData.multiballs : 
                             currentTab === 'gimmicks' ? gameData.gimmicks : gameData.awards;
                items.forEach(item => {
                    gameState.gimmickProgress[item.id] = item.maxProgress;
                    gameState.totalScore += item.maxProgress * 25000000;
                });
                if (currentTab === 'multiballs') {
                    gameState.activeMultiballs = gameData.multiballs.length;
                    gameState.multiballActive = true;
                    showMultiballIndicator();
                }
                updateMultiballGrid();
                updateGimmickGrid();
                updateAwardsGrid();
                updateGameStats();
            }
        }

        function startRandomMultiball() {
            const availableMultiballs = gameData.multiballs.filter(mb => 
                gameState.gimmickProgress[mb.id] < mb.maxProgress
            );
            if (availableMultiballs.length > 0) {
                const randomMultiball = availableMultiballs[Math.floor(Math.random() * availableMultiballs.length)];
                activateMultiball(randomMultiball);
            } else {
                alert('No multiballs available! Capture dinosaurs or spell letters first.');
            }
        }

        // UI updates (updated for 6 modes)
        function updateGameStats() {
            const totalShots = gameData.majorModes.reduce((total, mode) => {
                return total + mode.shots.reduce((sum, shot) => sum + shot.maxShots, 0);
            }, 0);
            
            const completedShots = Object.values(gameState.shotProgress).reduce((sum, progress) => sum + progress, 0);
            const progressPercent = totalShots > 0 ? (completedShots / totalShots) * 100 : 0;
            const baseModes = gameState.completedModes.filter(id => gameData.majorModes.slice(0,6).some(m => m.id === id)).length;
            
            document.getElementById('totalProgress').textContent = progressPercent.toFixed(1) + '%';
            document.getElementById('activeMultiballs').textContent = gameState.activeMultiballs;
            document.getElementById('completedModes').textContent = `${baseModes}/6`;
            document.getElementById('totalScore').textContent = formatPoints(gameState.totalScore);
        }

        function showMultiballIndicator() {
            document.getElementById('multiballIndicator').style.display = 'block';
        }

        function hideMultiballIndicator() {
            document.getElementById('multiballIndicator').style.display = 'none';
        }

        function formatPoints(points) {
            if (points >= 1000000000) return (points / 1000000000).toFixed(1) + 'B';
            if (points >= 1000000) return (points / 1000000).toFixed(0) + 'M';
            return points.toLocaleString();
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initGame();
            
            // Tab switching event listeners (updated for new tab names)
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    const tabText = this.textContent.trim().split(' ')[1].toLowerCase().replace(/[^\w]/g, '');  // Extract tab name
                    switchTab(tabText === 'paddock' ? 'modes' : tabText);  // Handle 'Paddock Modes'
                });
            });
        });
    </script>
</body>
</html>
